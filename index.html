<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>í•µì‹¬ê°ì • ìê°€ì§„ë‹¨</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        :root {
            --primary: #0d9488;
            --primary-dark: #0f766e;
            --primary-light: #14b8a6;
            --primary-gradient: linear-gradient(135deg, #0d9488 0%, #0f766e 100%);
            --secondary-gradient: linear-gradient(135deg, #14b8a6 0%, #0d9488 100%);
            --shadow-sm: 0 2px 8px rgba(0, 0, 0, 0.08);
            --shadow-md: 0 4px 16px rgba(0, 0, 0, 0.12);
            --shadow-lg: 0 8px 32px rgba(0, 0, 0, 0.16);
            --shadow-xl: 0 20px 60px rgba(0, 0, 0, 0.2);
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Pretendard', 'Roboto', 'Helvetica Neue', Arial, sans-serif;
            background: linear-gradient(135deg, #ccfbf1 0%, #99f6e4 50%, #5eead4 100%);
            background-attachment: fixed;
            min-height: 100vh;
            color: #1f2937;
            line-height: 1.6;
            padding: 2rem 1rem;
            overflow-x: hidden;
            word-wrap: break-word;
            word-break: keep-all;
            display: flex;
            flex-direction: column;
            align-items: center;
        }

        .container {
            max-width: 960px;
            margin: 0 auto;
            width: 100%;
            flex: 1;
            display: flex;
            flex-direction: column;
        }

        .page {
            display: none;
        }

        .page.active {
            flex: 1;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            min-height: calc(100vh - 4rem);
            animation: fadeInUp 0.5s ease-out;
        }

        .page.active > .card,
        .page.active > .page-center {
            width: 100%;
            margin-bottom: 0;
        }

        .page-center {
            max-width: 900px;
            margin: 0 auto;
        }

        .page-center .actions {
            position: static;
            background: transparent;
            backdrop-filter: none;
            padding: 0;
            box-shadow: none;
            border-radius: 0;
            justify-content: center;
            margin-top: clamp(2.5rem, 5vw, 3.5rem);
        }

        .card {
            background: rgba(255, 255, 255, 0.98);
            backdrop-filter: blur(10px);
            border-radius: 2rem;
            padding: clamp(2rem, 5vw, 3.5rem);
            padding-bottom: clamp(2.5rem, 6vw, 4rem);
            box-shadow: var(--shadow-xl);
            margin-bottom: 2rem;
        }

        @keyframes fadeInUp {
            from { opacity: 0; transform: translateY(30px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .header {
            text-align: center;
            margin-bottom: 2.5rem;
        }

        .header h1 {
            font-size: clamp(28px, 6vw, 44px);
            font-weight: 900;
            background: var(--primary-gradient);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            margin-bottom: 0.75rem;
            letter-spacing: -0.02em;
        }

        .header .subtitle {
            font-size: clamp(14px, 3vw, 18px);
            color: #64748b;
            font-weight: 500;
        }

        .section-header {
            text-align: center;
            margin-bottom: 2rem;
        }

        .section-header .tag {
            display: inline-flex;
            align-items: center;
            justify-content: center;
            padding: .4rem 1rem;
            border-radius: 999px;
            font-size: clamp(11px, 1.8vw, 13px);
            font-weight: 700;
            color: var(--primary);
            background: rgba(13, 148, 136, 0.12);
            margin-bottom: .75rem;
        }

        .section-header .title-main {
            font-size: clamp(22px, 5vw, 32px);
            font-weight: 900;
            color: var(--primary);
            margin-bottom: .5rem;
        }

        .section-header .subtitle-text {
            font-size: clamp(13px, 2.6vw, 17px);
            color: #475569;
            line-height: 1.6;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: .35rem;
            flex-wrap: wrap;
        }

        .section-header .divider {
            width: clamp(80px, 15vw, 140px);
            height: 3px;
            margin: 1.25rem auto 0;
            border-radius: 999px;
            background: linear-gradient(135deg, rgba(13, 148, 136, 0.3), rgba(20, 184, 166, 0.4));
        }

        /* ===== INTRO ===== */
        .intro-section {
            background: linear-gradient(135deg, rgba(13, 148, 136, 0.08), rgba(20, 184, 166, 0.08));
            border-radius: 1.5rem;
            padding: 2rem;
            margin-bottom: 2rem;
            border: 2px solid rgba(13, 148, 136, 0.15);
            text-align: center;
        }

        .intro-section h2 {
            font-size: clamp(20px, 4vw, 24px);
            font-weight: 700;
            color: var(--primary);
            margin-bottom: 1rem;
            text-align: center;
            justify-content: center;
        }

        .intro-section p {
            font-size: clamp(14px, 2.5vw, 16px);
            color: #475569;
            line-height: 1.7;
            margin-bottom: 0.4rem;
            text-align: center;
        }

        .intro-section p:last-child {
            margin-bottom: 0;
        }

        .info-block {
            margin-top: clamp(1.5rem, 4vw, 2.5rem);
            padding: clamp(1.2rem, 3.5vw, 2rem);
            border-radius: 1.25rem;
            background: linear-gradient(135deg, rgba(13, 148, 136, 0.1), rgba(20, 184, 166, 0.1));
            border: 1px solid rgba(13, 148, 136, 0.15);
            display: grid;
            gap: clamp(.85rem, 2.2vw, 1.4rem);
        }

        .info-title {
            display: flex;
            align-items: center;
            gap: .6rem;
            font-size: clamp(15px, 2.8vw, 19px);
            font-weight: 800;
            color: var(--primary);
        }

        .info-item {
            display: flex;
            align-items: flex-start;
            gap: .75rem;
            font-size: clamp(14px, 2.5vw, 17px);
            color: #1f2937;
            line-height: 1.6;
        }

        .info-item strong {
            font-weight: 700;
            color: var(--primary);
            min-width: 1.5em;
        }

        /* ===== USER INFO ===== */
        .user-form-grid {
            display: flex;
            flex-direction: column;
            gap: 1.5rem;
            width: 100%;
            max-width: 600px;
            margin: 0 auto;
        }

        .user-field { width: 100%; }

        .user-input, .user-select {
            width: 100%;
            height: 48px;
            border: 2px solid #e5e7eb;
            border-radius: .75rem;
            padding: 0 1rem;
            font-size: 16px;
            background: #fff;
            transition: all 0.3s ease;
            font-family: inherit;
        }

        .user-input:focus, .user-select:focus {
            outline: none;
            border-color: var(--primary);
            box-shadow: 0 0 0 3px rgba(13, 148, 136, 0.1);
        }

        .user-select {
            cursor: pointer;
            appearance: none;
            background-image: url('data:image/svg+xml,%3Csvg xmlns=%22http://www.w3.org/2000/svg%22 fill=%22none%22 viewBox=%220 0 20 20%22%3E%3Cpath stroke=%22%236b7280%22 stroke-linecap=%22round%22 stroke-linejoin=%22round%22 stroke-width=%221.5%22 d=%22M6 8l4 4 4-4%22/%3E%3C/svg%3E');
            background-repeat: no-repeat;
            background-position: right 0.75rem center;
            background-size: 1.25em;
        }

        .user-radio-group {
            width: 100%;
            height: 48px;
            border: 2px solid #e5e7eb;
            border-radius: .75rem;
            padding: 0 1rem;
            display: flex;
            align-items: center;
            justify-content: flex-start;
            gap: 1.5rem;
            background: #fff;
            transition: all 0.3s ease;
        }

        .user-radio-group:focus-within {
            border-color: var(--primary);
            box-shadow: 0 0 0 3px rgba(13, 148, 136, 0.1);
        }

        .radio-label {
            display: flex;
            align-items: center;
            gap: .5rem;
            cursor: pointer;
        }

        .radio-input {
            width: 18px;
            height: 18px;
            accent-color: var(--primary);
            cursor: pointer;
        }

        .radio-label span {
            font-size: clamp(14px, 2.2vw, 16px);
            color: #334155;
        }

        .consent-box {
            border: 2px solid #e5e7eb;
            border-radius: .75rem;
            padding: 1.5rem;
            background: #fff;
        }

        .consent-label {
            display: flex;
            gap: .6rem;
            align-items: center;
            cursor: pointer;
            font-size: clamp(13px, 2.1vw, 15px);
            color: #475569;
        }

        .consent-checkbox {
            width: 18px;
            height: 18px;
            accent-color: var(--primary);
            cursor: pointer;
            position: relative;
            top: 2px;
        }

        /* ===== ACTIONS ===== */
        .actions {
            display: flex;
            gap: 1.25rem;
            justify-content: center;
            margin-top: clamp(2.5rem, 5vw, 3.5rem);
            flex-wrap: wrap;
        }

        .actions-sticky {
            display: flex;
            gap: 1rem;
            justify-content: space-between;
            margin-top: clamp(2.5rem, 5vw, 3.5rem);
            flex-wrap: wrap;
            position: sticky;
            bottom: 1rem;
            background: rgba(255, 255, 255, 0.95);
            backdrop-filter: blur(10px);
            padding: 1rem 2rem;
            border-radius: 1rem;
            box-shadow: 0 -2px 10px rgba(0, 0, 0, 0.1);
            z-index: 100;
        }

        .actions-sticky .btn-secondary { margin-right: auto; }
        .actions-sticky .btn:not(.btn-secondary) { margin-left: auto; }

        .btn {
            background: var(--primary-gradient);
            color: white;
            border: none;
            border-radius: 1rem;
            padding: 1rem 2rem;
            font-size: clamp(15px, 3vw, 17px);
            font-weight: 700;
            cursor: pointer;
            box-shadow: var(--shadow-md);
            transition: all 0.3s ease;
            display: inline-flex;
            align-items: center;
            gap: 0.5rem;
        }

        .btn:hover { transform: translateY(-2px); box-shadow: var(--shadow-lg); }
        .btn:active { transform: translateY(0); }

        .btn-secondary {
            background: #e5e7eb;
            color: #374151;
            box-shadow: none;
        }

        .btn-secondary:hover { background: #d1d5db; }

        /* ===== PROGRESS ===== */
        .progress-bar {
            position: sticky;
            top: 0.5rem;
            z-index: 100;
            background: white;
            border-radius: 1rem;
            padding: 1rem;
            margin-bottom: 1.5rem;
            box-shadow: var(--shadow-lg);
        }

        .progress-info {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 0.5rem;
        }

        .progress-text {
            font-weight: 700;
            color: #1f2937;
            font-size: clamp(13px, 2.5vw, 15px);
        }

        .progress-percentage {
            font-weight: 800;
            color: var(--primary);
            font-size: clamp(14px, 3vw, 18px);
        }

        .progress-track {
            height: 10px;
            background: #e5e7eb;
            border-radius: 999px;
            overflow: hidden;
        }

        .progress-fill {
            height: 100%;
            background: var(--primary-gradient);
            border-radius: 999px;
            transition: width 0.5s ease;
            width: 0%;
        }

        /* ===== EMOTION CARDS ===== */
        .emotion-card {
            background: white;
            border-radius: 1.5rem;
            padding: clamp(1.2rem, 3vw, 2rem);
            margin-bottom: 1.2rem;
            border: 2px solid #e5e7eb;
            transition: all 0.3s;
        }

        .emotion-card.has-checked {
            border-color: var(--primary);
            background: linear-gradient(135deg, rgba(13, 148, 136, 0.03), rgba(20, 184, 166, 0.02));
        }

        .emotion-header {
            display: flex;
            align-items: center;
            gap: 0.8rem;
            margin-bottom: 1.2rem;
        }

        .emotion-number {
            width: 40px;
            height: 40px;
            border-radius: 12px;
            background: var(--primary-gradient);
            color: white;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: 800;
            font-size: 1.1rem;
            flex-shrink: 0;
        }

        .emotion-checked-count {
            font-size: clamp(13px, 2.5vw, 15px);
            color: #9ca3af;
            font-weight: 600;
        }

        .emotion-checked-count.has-count {
            color: var(--primary);
        }

        .category-group {
            margin-bottom: 0.8rem;
        }

        .category-label {
            display: inline-block;
            padding: 0.25rem 0.7rem;
            border-radius: 0.5rem;
            font-size: clamp(11px, 1.8vw, 13px);
            font-weight: 700;
            margin-bottom: 0.5rem;
            color: white;
        }

        .cat-interpersonal { background: linear-gradient(135deg, #0d9488, #14b8a6); }
        .cat-family { background: linear-gradient(135deg, #d97706, #f59e0b); }
        .cat-work { background: linear-gradient(135deg, #7c3aed, #8b5cf6); }
        .cat-strength { background: linear-gradient(135deg, #059669, #10b981); }

        .items-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(150px, 1fr));
            gap: 0.4rem;
        }

        .check-item {
            display: flex;
            align-items: center;
            gap: 0.45rem;
            padding: 0.5rem 0.6rem;
            border-radius: 0.6rem;
            cursor: pointer;
            transition: all 0.2s;
            background: #f0fdfa;
            border: 1.5px solid transparent;
            user-select: none;
        }

        .check-item:hover {
            background: #ccfbf1;
            border-color: #5eead4;
        }

        .check-item.checked {
            background: linear-gradient(135deg, #ccfbf1, #f0fdfa);
            border-color: var(--primary);
        }

        .check-item input[type="checkbox"] { display: none; }

        .custom-check {
            width: 18px;
            height: 18px;
            border-radius: 4px;
            border: 2px solid #d1d5db;
            flex-shrink: 0;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: all 0.2s;
        }

        .check-item.checked .custom-check {
            background: var(--primary-gradient);
            border-color: var(--primary);
        }

        .custom-check svg {
            width: 11px;
            height: 11px;
            fill: none;
            stroke: white;
            stroke-width: 3;
            stroke-linecap: round;
            stroke-linejoin: round;
            opacity: 0;
            transition: opacity 0.2s;
        }

        .check-item.checked .custom-check svg { opacity: 1; }

        .check-label {
            font-size: clamp(14px, 2.8vw, 16px);
            color: #374151;
            line-height: 1.4;
        }

        .check-item.checked .check-label {
            color: var(--primary-dark);
            font-weight: 600;
        }

        /* ===== RESULT ===== */
        .result-title {
            font-size: clamp(26px, 5vw, 36px);
            font-weight: 900;
            color: var(--primary);
            margin-bottom: 0.75rem;
            letter-spacing: 0.02em;
            text-align: center;
        }

        .result-title::after {
            content: "";
            display: block;
            width: 72px;
            height: 4px;
            border-radius: 999px;
            margin: 0.5rem auto 0;
            background: linear-gradient(90deg, #5eead4, #0d9488);
        }

        .top-emotions {
            background: linear-gradient(135deg, rgba(13, 148, 136, 0.08), rgba(20, 184, 166, 0.06));
            border-radius: 1.25rem;
            padding: 2rem;
            margin: 2rem 0;
            text-align: center;
            border: 2px solid rgba(13, 148, 136, 0.15);
        }

        .top-emotions h3 {
            font-size: clamp(16px, 3vw, 20px);
            color: var(--primary-dark);
            margin-bottom: 1rem;
            font-weight: 800;
        }

        .top-emotion-badges {
            display: flex;
            flex-wrap: wrap;
            justify-content: center;
            gap: 0.7rem;
        }

        .top-badge {
            display: inline-flex;
            align-items: center;
            gap: 0.4rem;
            padding: 0.7rem 1.5rem;
            background: var(--primary-gradient);
            color: white;
            border-radius: 2rem;
            font-weight: 700;
            font-size: clamp(14px, 3vw, 18px);
            box-shadow: 0 4px 15px rgba(13, 148, 136, 0.3);
        }

        .top-badge .rank {
            width: 26px;
            height: 26px;
            background: rgba(255,255,255,0.3);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 0.85rem;
        }

        .bar-chart {
            display: flex;
            flex-direction: column;
            gap: 0.5rem;
            margin-top: 2rem;
        }

        .bar-row {
            display: flex;
            align-items: center;
            gap: 0.6rem;
        }

        .bar-num {
            width: 28px;
            font-size: clamp(12px, 2vw, 14px);
            font-weight: 700;
            text-align: center;
            color: white;
            background: var(--primary-gradient);
            border-radius: 6px;
            padding: 2px 0;
            flex-shrink: 0;
        }

        .bar-track {
            flex: 1;
            height: 28px;
            background: #f0fdfa;
            border-radius: 0.5rem;
            overflow: hidden;
            position: relative;
        }

        .bar-fill {
            height: 100%;
            background: linear-gradient(90deg, var(--primary-light), var(--primary));
            border-radius: 0.5rem;
            transition: width 1s ease;
            display: flex;
            align-items: center;
            justify-content: flex-end;
            padding-right: 0.5rem;
            min-width: 0;
        }

        .bar-fill.top-emotion {
            background: linear-gradient(90deg, var(--primary-dark), var(--primary));
        }

        .bar-value {
            font-size: 0.75rem;
            font-weight: 700;
            color: white;
            white-space: nowrap;
        }

        .bar-value-outside {
            width: 28px;
            font-size: clamp(12px, 2vw, 14px);
            font-weight: 700;
            color: #9ca3af;
            flex-shrink: 0;
            text-align: center;
        }

        /* ===== INSIGHT ===== */
        .insight-box {
            background: white;
            border-radius: 1.25rem;
            padding: 1.5rem 2rem;
            margin-bottom: 1.5rem;
            border: 2px solid #e5e7eb;
        }

        .insight-box h4 {
            color: var(--primary);
            margin-bottom: 0.75rem;
            font-size: clamp(16px, 3vw, 19px);
            font-weight: 800;
        }

        .insight-box p {
            color: #4b5563;
            font-size: clamp(14px, 2.5vw, 16px);
            line-height: 1.9;
        }

        .detail-emotion-block {
            background: linear-gradient(135deg, rgba(13, 148, 136, 0.05), rgba(20, 184, 166, 0.03));
            border-radius: 1rem;
            padding: 1.2rem 1.5rem;
            margin-bottom: 1rem;
            border: 1px solid rgba(13, 148, 136, 0.12);
        }

        .detail-emotion-block h5 {
            font-size: clamp(15px, 2.8vw, 17px);
            font-weight: 800;
            color: var(--primary-dark);
            margin-bottom: 0.5rem;
        }

        .detail-tags {
            display: flex;
            flex-wrap: wrap;
            gap: 0.4rem;
        }

        .detail-tag {
            display: inline-block;
            padding: 0.3rem 0.7rem;
            border-radius: 0.5rem;
            font-size: clamp(11px, 2vw, 13px);
            font-weight: 600;
            background: white;
            border: 1px solid #e5e7eb;
            color: #475569;
        }

        .detail-tag.cat-interpersonal { border-color: #5eead4; color: #0d9488; background: #f0fdfa; }
        .detail-tag.cat-family { border-color: #fcd34d; color: #d97706; background: #fffbeb; }
        .detail-tag.cat-work { border-color: #c4b5fd; color: #7c3aed; background: #f5f3ff; }
        .detail-tag.cat-strength { border-color: #6ee7b7; color: #059669; background: #ecfdf5; }

        /* ===== STRATEGY ===== */
        .strategy-container {
            max-width: 700px;
            margin: 0 auto;
        }

        .strategy-item {
            background: white;
            border: 2px solid #e5e7eb;
            border-radius: 1rem;
            padding: 1.5rem;
            margin-bottom: 1rem;
            transition: all 0.3s ease;
        }

        .strategy-item:hover {
            border-color: var(--primary);
            box-shadow: var(--shadow-sm);
        }

        .strategy-number {
            font-weight: 800;
            color: var(--primary);
            margin-bottom: 0.5rem;
            font-size: clamp(15px, 3vw, 17px);
        }

        .strategy-input {
            width: 100%;
            border: none;
            border-bottom: 2px solid #e5e7eb;
            padding: 0.5rem 0;
            font-size: 16px;
            color: #1f2937;
            font-family: inherit;
            transition: border-color 0.3s ease;
            background: transparent;
        }

        .strategy-input:focus {
            outline: none;
            border-bottom-color: var(--primary);
        }

        .strategy-input::placeholder { color: #9ca3af; }

        .strategy-remove {
            margin-top: 0.5rem;
            background: none;
            border: none;
            color: #ef4444;
            cursor: pointer;
            font-size: 13px;
            padding: 0.25rem 0.5rem;
            border-radius: 0.5rem;
        }

        .strategy-remove:hover { background: rgba(239, 68, 68, 0.1); }

        /* ===== COMPLETION ===== */
        .completion-icon {
            font-size: 80px;
            margin-bottom: 1rem;
        }

        .completion-message {
            font-size: clamp(16px, 3vw, 20px);
            color: #475569;
            line-height: 1.8;
        }

        /* ===== Responsive ===== */

        /* íƒœë¸”ë¦¿ */
        @media (max-width: 768px) {
            body { padding: 1rem 0.5rem; }
            .container { max-width: 100%; }
            .page-center { max-width: 100%; }

            .page.active {
                min-height: calc(100vh - 2rem);
            }

            .page-center .actions {
                justify-content: center;
                margin-top: clamp(2rem, 4vw, 3rem);
            }

            .card {
                padding: 1.5rem;
                border-radius: 1.5rem;
                margin-bottom: 1.5rem;
            }

            .header { margin-bottom: 1.5rem; }

            .items-grid {
                grid-template-columns: 1fr 1fr;
                gap: 0.3rem;
            }

            .check-item { padding: 0.4rem 0.5rem; }
            .check-label { font-size: clamp(13px, 2.8vw, 15px); }
            .custom-check { width: 16px; height: 16px; }
            .custom-check svg { width: 10px; height: 10px; }

            .emotion-card {
                padding: 1rem;
                border-radius: 1rem;
                margin-bottom: 0.8rem;
            }

            .emotion-header { gap: 0.6rem; margin-bottom: 0.8rem; }
            .emotion-number { width: 34px; height: 34px; font-size: 0.95rem; border-radius: 10px; }
            .category-group { margin-bottom: 0.6rem; }
            .category-label { font-size: 11px; padding: 0.2rem 0.6rem; }

            .actions-sticky {
                padding: 0.8rem 1rem;
                margin-left: -1.5rem;
                margin-right: -1.5rem;
                margin-bottom: -1.5rem;
                border-radius: 0 0 1.5rem 1.5rem;
                gap: 0.75rem;
            }

            .actions-sticky .btn {
                flex: 0 1 auto;
                min-width: 100px;
                padding: 0.8rem 1.2rem;
                font-size: clamp(13px, 2.5vw, 15px);
                justify-content: center;
            }

            .actions-sticky .btn-secondary { margin-right: auto; }
            .actions-sticky .btn:not(.btn-secondary) { margin-left: auto; }

            .bar-num { width: 24px; font-size: 11px; }
            .bar-track { height: 24px; }
            .bar-value-outside { width: 24px; font-size: 12px; }

            .progress-bar { padding: 0.75rem; margin-bottom: 1rem; }
            .top-emotions { padding: 1.5rem; }
            .top-badge { font-size: clamp(13px, 2.5vw, 16px); padding: 0.6rem 1.2rem; }
            .insight-box { padding: 1.2rem; }
            .insight-box h4 { font-size: clamp(15px, 3vw, 17px); }
            .detail-emotion-block { padding: 1rem; }
            .detail-tag { font-size: clamp(10px, 1.8vw, 12px); padding: 0.25rem 0.55rem; }

            .result-title { font-size: clamp(22px, 5vw, 30px); }

            .info-block { padding: 1rem; }
            .info-title { font-size: clamp(14px, 2.5vw, 17px); }
            .info-item { font-size: clamp(13px, 2.2vw, 15px); }

            .completion-icon { font-size: 60px; }
            .completion-message { font-size: clamp(14px, 2.5vw, 18px); }

            .strategy-item { padding: 1rem; }
            .strategy-number { font-size: clamp(14px, 2.5vw, 16px); }

            .intro-section { padding: 1.5rem; }
            .intro-section h2 { font-size: clamp(18px, 4vw, 22px); }
            .intro-section p { font-size: clamp(13px, 2.3vw, 15px); }

            .user-form-grid { gap: 1rem; }
            .consent-box { padding: 1rem; }

            .btn {
                padding: 0.8rem 1.5rem;
                font-size: clamp(14px, 2.5vw, 16px);
            }
        }

        /* ì†Œí˜• ëª¨ë°”ì¼ */
        @media (max-width: 480px) {
            body { padding: 0.75rem 0.4rem; }

            .page.active {
                min-height: calc(100vh - 1.5rem);
            }

            .card {
                padding: 1.2rem;
                border-radius: 1.2rem;
                margin-bottom: 1rem;
            }

            .header { margin-bottom: 1.2rem; }
            .header h1 { font-size: clamp(22px, 6vw, 30px); margin-bottom: 0.4rem; }
            .header .subtitle { font-size: clamp(13px, 2.5vw, 15px); }

            .section-header .title-main { font-size: clamp(20px, 5vw, 26px); }
            .section-header .subtitle-text { font-size: clamp(12px, 2.5vw, 14px); }

            .items-grid {
                grid-template-columns: 1fr 1fr;
                gap: 0.25rem;
            }

            .check-item { padding: 0.35rem 0.4rem; gap: 0.35rem; }
            .check-label { font-size: clamp(13px, 3vw, 14px); }

            .emotion-card { padding: 0.8rem; margin-bottom: 0.6rem; }
            .emotion-header { margin-bottom: 0.6rem; }
            .emotion-number { width: 30px; height: 30px; font-size: 0.85rem; border-radius: 8px; }
            .emotion-checked-count { font-size: clamp(11px, 2.2vw, 13px); }

            .actions-sticky {
                margin-left: -1.2rem;
                margin-right: -1.2rem;
                margin-bottom: -1.2rem;
                border-radius: 0 0 1.2rem 1.2rem;
                padding: 0.7rem 0.8rem;
            }

            .actions-sticky .btn {
                min-width: 90px;
                padding: 0.7rem 1rem;
                font-size: 13px;
                border-radius: 0.75rem;
            }

            .bar-row { gap: 0.4rem; }
            .bar-num { width: 22px; font-size: 10px; padding: 1px 0; }
            .bar-track { height: 22px; }
            .bar-fill { padding-right: 0.3rem; }
            .bar-value { font-size: 0.65rem; }
            .bar-value-outside { width: 22px; font-size: 11px; }

            .top-emotions { padding: 1rem; margin: 1.5rem 0; }
            .top-emotions h3 { font-size: clamp(14px, 3vw, 17px); }
            .top-badge { font-size: clamp(12px, 2.5vw, 15px); padding: 0.5rem 1rem; }
            .top-badge .rank { width: 22px; height: 22px; font-size: 0.75rem; }

            .insight-box { padding: 1rem; margin-bottom: 1rem; }
            .insight-box h4 { font-size: clamp(14px, 2.8vw, 16px); }
            .insight-box p { font-size: clamp(13px, 2.3vw, 15px); line-height: 1.7; }

            .detail-emotion-block { padding: 0.8rem; margin-bottom: 0.7rem; }
            .detail-emotion-block h5 { font-size: clamp(13px, 2.5vw, 15px); }
            .detail-tag { font-size: clamp(10px, 1.8vw, 11px); padding: 0.2rem 0.45rem; }

            .result-title { font-size: clamp(20px, 5vw, 26px); }
            .result-title::after { width: 50px; height: 3px; }

            .strategy-item { padding: 0.8rem; margin-bottom: 0.7rem; }
            .strategy-number { font-size: 14px; }
            .strategy-input { font-size: 15px; }

            .intro-section { padding: 1.2rem; margin-bottom: 1.2rem; }
            .info-block { padding: 0.8rem; gap: 0.6rem; }
            .info-title { font-size: clamp(13px, 2.5vw, 16px); }
            .info-item { font-size: clamp(12px, 2.2vw, 14px); gap: 0.5rem; }

            .completion-icon { font-size: 50px; }

            .user-radio-group { height: 44px; }
            .user-select { height: 44px; font-size: 15px; }
            .consent-box { padding: 0.8rem; }
            .consent-label { font-size: clamp(12px, 2.2vw, 14px); }

            .progress-bar { padding: 0.6rem; border-radius: 0.75rem; }
            .progress-track { height: 8px; }
        }

        /* ë§¤ìš° ì‘ì€ í™”ë©´ (SE ë“±) */
        @media (max-width: 360px) {
            body { padding: 0.5rem 0.3rem; }

            .card { padding: 1rem; border-radius: 1rem; }

            .header h1 { font-size: 20px; }

            .items-grid {
                grid-template-columns: 1fr;
                gap: 0.2rem;
            }

            .check-item { padding: 0.4rem 0.5rem; }
            .check-label { font-size: 12px; }

            .emotion-number { width: 28px; height: 28px; font-size: 0.8rem; }

            .actions-sticky {
                margin-left: -1rem;
                margin-right: -1rem;
                margin-bottom: -1rem;
                border-radius: 0 0 1rem 1rem;
                padding: 0.6rem 0.7rem;
            }

            .actions-sticky .btn {
                min-width: 80px;
                padding: 0.6rem 0.8rem;
                font-size: 12px;
            }

            .btn {
                padding: 0.7rem 1.2rem;
                font-size: 14px;
                border-radius: 0.75rem;
            }

            .top-badge { font-size: 12px; padding: 0.45rem 0.8rem; }

            .intro-section { padding: 1rem; }
            .intro-section p { font-size: 12px; }

            .insight-box p { font-size: 12px; }
            .detail-tag { font-size: 10px; }
        }

        @media print {
            body { background: white; padding: 0; }
            .actions, .actions-sticky, .progress-bar { display: none !important; }
            .card, .emotion-card { box-shadow: none; border: 1px solid #eee; break-inside: avoid; }
            .page { display: block !important; }
            #pageIntro, #pageUserInfo { display: none !important; }
        }
    </style>
</head>
<body>

<div class="container">

    <!-- PAGE 1: INTRO -->
    <div id="pageIntro" class="page active">
        <div class="page-center"><div class="card">
            <div class="header">
                <h1>ë‚˜ëŠ” ì–´ë–¤ ê°ì •ìœ¼ë¡œ ì‚¬ëŠ”ê°€</h1>
                <p class="subtitle">í•µì‹¬ê°ì • ìê°€ì§„ë‹¨</p>
            </div>

            <div class="intro-section">
                <h2>ê²€ì‚¬ ì•ˆë‚´</h2>
                <p>
                    16ê°œì˜ í‘œì—ì„œ í‰ì†Œ ë‚˜ì˜ í–‰ë™ê³¼ ëŠë‚Œì„<br>
                    ë§í•´ì£¼ëŠ” í•­ëª©ì— ì²´í¬í•´ ë³´ì„¸ìš”.
                </p>
                <p>
                    ìì‹ ì˜ í–‰ë™ì´ë‚˜ ëŠë‚Œì— ê°€ì¥ ê°€ê¹Œìš´<br>
                    í•­ëª©ì— í‘œì‹œí•˜ì‹œë©´ ë©ë‹ˆë‹¤.
                </p>
                <p>
                    ì—†ëŠ” ê²½ìš° ë¬´ì‘ë‹µ ê°€ëŠ¥, ë³µìˆ˜ ì‘ë‹µ ê°€ëŠ¥í•©ë‹ˆë‹¤.
                </p>
                <p>
                    ì²´í¬ê°€ ë§ì€ ê°ì •ì´ ë‹¹ì‹ ì˜<br>
                    í•µì‹¬ê°ì •ì¼ ê°€ëŠ¥ì„±ì´ ë†’ìŠµë‹ˆë‹¤.
                </p>
            </div>

            <div class="info-block">
                <div class="info-title">ê²€ì‚¬ ì „ ì•ˆë‚´ì‚¬í•­</div>
                <div class="info-item">
                    <strong>1.</strong> <span>ì´ <b>16ê°œ ì˜ì—­</b>ì˜ ë¬¸í•­ìœ¼ë¡œ êµ¬ì„±ë˜ì–´ ìˆìŠµë‹ˆë‹¤.</span>
                </div>
                <div class="info-item">
                    <strong>2.</strong> <span>ê° ì˜ì—­ì—ì„œ <b>í•´ë‹¹í•˜ëŠ” í•­ëª©ì„ ëª¨ë‘</b> ì²´í¬í•´ ì£¼ì„¸ìš”.</span>
                </div>
                <div class="info-item">
                    <strong>3.</strong> <span>ì •ë‹µì€ ì—†ìœ¼ë¯€ë¡œ <b>ì†”ì§í•˜ê²Œ</b> ì‘ë‹µí•´ ì£¼ì„¸ìš”.</span>
                </div>
            </div>

            <div class="actions">
                <button class="btn" onclick="goTo('pageUserInfo')">ê²€ì‚¬ ì‹œì‘í•˜ê¸° â†’</button>
            </div>
        </div></div>
    </div>

    <!-- PAGE 2: USER INFO -->
    <div id="pageUserInfo" class="page">
        <div class="page-center"><div class="card">
            <div style="text-align:center; margin-bottom:1.5rem;">
                <div class="tag">STEP 1</div>
                <div class="section-header" style="margin-bottom:0;">
                    <div class="title-main">ê¸°ë³¸ ì •ë³´ ì…ë ¥</div>
                    <div class="subtitle-text">ê²€ì‚¬ ì‹œì‘ ì „ ê¸°ë³¸ ì •ë³´ë¥¼ ì…ë ¥í•´ ì£¼ì„¸ìš”.</div>
                    <div class="divider"></div>
                </div>
            </div>

            <div class="user-form-grid">
                <div class="user-field">
                    <div class="user-radio-group">
                        <label class="radio-label">
                            <input type="radio" name="u-gender" value="ë‚¨" class="radio-input">
                            <span>ë‚¨</span>
                        </label>
                        <label class="radio-label">
                            <input type="radio" name="u-gender" value="ì—¬" class="radio-input">
                            <span>ì—¬</span>
                        </label>
                    </div>
                </div>
                <div class="user-field">
                    <select id="u-age" class="user-select">
                        <option value="">ì—°ë ¹ëŒ€ë¥¼ ì„ íƒí•˜ì„¸ìš”</option>
                        <option value="10ëŒ€">10ëŒ€</option>
                        <option value="20ëŒ€">20ëŒ€</option>
                        <option value="30ëŒ€">30ëŒ€</option>
                        <option value="40ëŒ€">40ëŒ€</option>
                        <option value="50ëŒ€">50ëŒ€</option>
                        <option value="60ëŒ€">60ëŒ€</option>
                        <option value="70ëŒ€">70ëŒ€</option>
                        <option value="80ëŒ€ ì´ìƒ">80ëŒ€ ì´ìƒ</option>
                    </select>
                </div>
                <div class="user-field">
                    <div class="consent-box">
                        <label class="consent-label">
                            <input type="checkbox" id="u-consent" class="consent-checkbox">
                            ê°œì¸ì •ë³´ ìˆ˜ì§‘ ë° ì´ìš©ì— ë™ì˜í•©ë‹ˆë‹¤
                        </label>
                    </div>
                </div>
            </div>

            <div class="actions">
                <button class="btn btn-secondary" onclick="goTo('pageIntro')">â† ì´ì „</button>
                <button class="btn" onclick="startQuiz()">ê²€ì‚¬ ì‹œì‘ â†’</button>
            </div>
        </div></div>
    </div>

    <!-- PAGE 3: QUIZ -->
    <div id="pageQuiz" class="page">
        <div class="card">
            <div class="header">
                <h1>í•µì‹¬ê°ì • ìê°€ì§„ë‹¨</h1>
                <p class="subtitle">í‰ì†Œ ë‚˜ì˜ í–‰ë™ê³¼ ëŠë‚Œì— í•´ë‹¹í•˜ëŠ” í•­ëª©ì„ ì²´í¬í•˜ì„¸ìš”</p>
            </div>

            <div class="progress-bar">
                <div class="progress-info">
                    <span class="progress-text">ì§„í–‰ë¥ </span>
                    <span class="progress-percentage" id="progressPct">0 / 16</span>
                </div>
                <div class="progress-track">
                    <div class="progress-fill" id="progressFill"></div>
                </div>
            </div>

            <div id="emotionCards"></div>

            <div class="actions actions-sticky">
                <button class="btn btn-secondary" onclick="goTo('pageUserInfo')">â† ì´ì „</button>
                <button class="btn" onclick="showResult1()">ê²°ê³¼ ë³´ê¸° â†’</button>
            </div>
        </div>
    </div>

    <!-- PAGE 4: RESULT 1 - ë‚˜ì˜ í•µì‹¬ ê°ì • (ë°°ì§€ + ë§‰ëŒ€ì°¨íŠ¸) -->
    <div id="pageResult1" class="page">
        <div class="card">
            <div class="result-title">ë‚˜ì˜ í•µì‹¬ê°ì • ì§„ë‹¨ ê²°ê³¼</div>

            <div class="top-emotions" id="topEmotions"></div>

            <div class="bar-chart" id="barChart"></div>

            <div class="actions actions-sticky">
                <button class="btn btn-secondary" onclick="goTo('pageQuiz')">â† ì´ì „</button>
                <button class="btn" onclick="goTo('pageResult2')">ë‹¤ìŒ â†’</button>
            </div>
        </div>
    </div>

    <!-- PAGE 5: RESULT 2 - ìƒìœ„ ê°ì • ì˜ì—­ë³„ ì²´í¬ í˜„í™© -->
    <div id="pageResult2" class="page">
        <div class="card">
            <div class="result-title">ìƒìœ„ ê°ì • ì˜ì—­ë³„ ì²´í¬ í˜„í™©</div>

            <div id="detailResult" style="margin-top:2rem;"></div>

            <div class="actions actions-sticky">
                <button class="btn btn-secondary" onclick="goTo('pageResult1')">â† ì´ì „</button>
                <button class="btn" onclick="goTo('pageResult3')">ë‹¤ìŒ â†’</button>
            </div>
        </div>
    </div>

    <!-- PAGE 6: RESULT 3 - í•µì‹¬ê°ì •ì´ë€? -->
    <div id="pageResult3" class="page">
        <div class="card">
            <div class="result-title">í•µì‹¬ê°ì •ì´ë€?</div>

            <div class="insight-box" style="margin-top:2rem;">
                <h4>â™¥ í•µì‹¬ê°ì •ì€ ëŒ€ë¬¼ë¦¼ ë©ë‹ˆë‹¤</h4>
                <p>
                    í•µì‹¬ê°ì •ì€ ë‚˜ì˜ í–‰ë™ê³¼ ì‚¬ê³ ì™€ ê°ì •ì„ ì§€ë°°í•˜ëŠ” ì¤‘ì‹¬ ê°ì •ì…ë‹ˆë‹¤.<br>
                    í•µì‹¬ê°ì •ì€ ë‚˜ì˜ ì¼ê±°ìˆ˜ ì¼íˆ¬ì¡±ì— ë‹¤ ë² ì–´ ìˆìŠµë‹ˆë‹¤.
                </p>
            </div>

            <div class="insight-box">
                <h4>â™¥ í•µì‹¬ê°ì •ì˜ íŠ¹ì§•</h4>
                <p>
                    í•µì‹¬ê°ì •ì€ ì–´ë¦° ì‹œì ˆ ì–‘ìœ¡ í™˜ê²½ì—ì„œ í˜•ì„±ë˜ì–´ ë¬´ì˜ì‹ì ìœ¼ë¡œ ë°˜ë³µë©ë‹ˆë‹¤.<br>
                    ë‚˜ë„ ëª¨ë¥´ê²Œ íŠ¹ì • ê°ì •ì´ ìì£¼ ì˜¬ë¼ì˜¨ë‹¤ë©´, ê·¸ê²ƒì´ ë°”ë¡œ í•µì‹¬ê°ì •ì…ë‹ˆë‹¤.<br>
                    í•µì‹¬ê°ì •ì„ ì¸ì‹í•˜ëŠ” ê²ƒì´ ë³€í™”ì˜ ì²«ê±¸ìŒì…ë‹ˆë‹¤.
                </p>
            </div>

            <div class="insight-box">
                <h4>â™¥ í•µì‹¬ê°ì •ì„ ë‹¤ë£¨ëŠ” ë°©ë²•</h4>
                <p>
                    ë¨¼ì € ë‚˜ì˜ í•µì‹¬ê°ì •ì„ ì¸ì •í•˜ê³  ë°›ì•„ë“¤ì´ì„¸ìš”.<br>
                    í•µì‹¬ê°ì •ì´ ì˜¬ë¼ì˜¬ ë•Œ ì•Œì•„ì°¨ë¦¬ëŠ” ì—°ìŠµì„ í•´ë³´ì„¸ìš”.<br>
                    ì „ë¬¸ ìƒë‹´ì„ í†µí•´ ë” ê¹Šì€ ìê¸° ì´í•´ë¥¼ í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.
                </p>
            </div>

            <div class="actions actions-sticky">
                <button class="btn btn-secondary" onclick="goTo('pageResult2')">â† ì´ì „</button>
                <button class="btn" onclick="goTo('pageResult4')">ì‹¤ì²œ ë°©ì•ˆ â†’</button>
            </div>
        </div>
    </div>

    <!-- PAGE 7: RESULT 4 - ì‹¤ì²œ ë°©ì•ˆ -->
    <div id="pageResult4" class="page">
        <div class="card">
            <div class="result-title">ë‚˜ì˜ ì •ì‹ ê±´ê°•ì„ ìœ„í•œ ì˜ì–‘</div>
            <p style="text-align:center; color:#64748b; margin-top:0.5rem; font-size:clamp(14px, 2.5vw, 16px);">
                ë‚˜ì˜ ì •ì‹ ê±´ê°•ì„ ìœ„í•œ ì‹¤ì²œ ë°©ì•ˆì„ ì‘ì„±í•´ ë³´ì„¸ìš”
            </p>

            <div class="strategy-container" style="margin-top:2rem;">
                <div id="strategyList"></div>
                <button class="btn btn-secondary" onclick="addStrategy()" style="margin-top:1rem; width:100%; justify-content:center;">
                    + í•­ëª© ì¶”ê°€í•˜ê¸°
                </button>
            </div>

            <div class="actions actions-sticky">
                <button class="btn btn-secondary" onclick="goTo('pageResult3')">â† ì´ì „</button>
                <button class="btn" onclick="goTo('pageComplete')">ì™„ë£Œí•˜ê¸° â†’</button>
            </div>
        </div>
    </div>

    <!-- PAGE 8: COMPLETE -->
    <div id="pageComplete" class="page">
        <div class="page-center"><div class="card" style="text-align:center;">
            <div class="completion-icon">ğŸ‰</div>
            <div class="result-title">ê²€ì‚¬ê°€ ì™„ë£Œë˜ì—ˆìŠµë‹ˆë‹¤!</div>
            <div class="completion-message" style="margin-top:1.5rem;">
                í•µì‹¬ê°ì • ìê°€ì§„ë‹¨ ê²€ì‚¬ë¥¼ ì™„ë£Œí•´ ì£¼ì…”ì„œ ê°ì‚¬í•©ë‹ˆë‹¤.<br>
                ê²°ê³¼ë¥¼ ì°¸ê³ í•˜ì—¬ ìê¸° ì´í•´ì˜ í­ì„ ë„“í˜€ ë³´ì„¸ìš”.
            </div>

            <div class="info-block" style="text-align:left; margin-top:2rem;">
                <div class="info-title">ê²€ì‚¬ ê´€ë ¨ ì¶”ê°€ ì •ë³´</div>
                <div class="info-item">
                    <strong>1.</strong>
                    <div>ìœ íŠœë¸Œ <strong>'ì´ì¬ê²½êµìˆ˜TV'</strong>, ê¸¸ë²—ì‹¬ë¦¬ìƒë‹´ì—°êµ¬ì†Œ í™ˆí˜ì´ì§€ì—ì„œ ë” ë§ì€ ìë£Œë¥¼ í™•ì¸í•´ ë³´ì„¸ìš”.</div>
                </div>
                <div class="info-item">
                    <strong>2.</strong>
                    <div>
                        êµìœ¡(ê°•ì˜) ë° ì‹¬ë¦¬ ìƒë‹´ ë¬¸ì˜ëŠ” ì•„ë˜ ë©”ì¼ë¡œ ì—°ë½ ì£¼ì„¸ìš”.<br>
                        <span style="color:var(--primary); font-weight:700;">ljg4129@naver.com</span>
                    </div>
                </div>
            </div>

            <div class="actions" style="margin-top:2rem;">
                <button class="btn btn-secondary" onclick="goTo('pageResult4')">â† ì´ì „</button>
                <button class="btn" onclick="resetAll()">ì²˜ìŒìœ¼ë¡œ ëŒì•„ê°€ê¸°</button>
            </div>
        </div></div>
    </div>

</div>

<script>
const emotionsData = [
    {
        id: 1,
        categories: {
            "ëŒ€ì¸ê´€ê³„": ["ìœ„ì¶•ë˜ì–´ìˆë‹¤", "ê¸´ì¥ë˜ì–´ìˆë‹¤", "ìš”êµ¬ë¥¼ ëª»í•œë‹¤", "ê±°ì ˆì„ ëª»í•œë‹¤"],
            "ê°€ì¡±ê´€ê³„": ["ì§‘ì—ì„œëŠ” íŒŒê¹€ì¹˜ë‹¤", "ëŠ˜ ì§€ì³ìˆë‹¤", "ëˆˆì¹˜ ë³´ê²Œí•œë‹¤", "í•¨ê»˜ ìë¦¬í•˜ê¸°ë¥¼ í”¼í•œë‹¤"],
            "ì¼/ê³µë¶€": ["ì˜ í•˜ë ¤ê³ í•œë‹¤", "í˜¼ì ë‹¤í•œë‹¤", "í•  ì¼ì´ ì‚°ë”ë¯¸ê°™ì´ ìŒ“ì—¬ìˆë‹¤"],
            "ê°•ì ": ["ì—´ì‹¬íˆ ì‚°ë‹¤", "ë§¡ì€ë°”ë¥¼ ë‹¤í•œë‹¤", "ë“ ë“ í•˜ë‹¤"]
        }
    },
    {
        id: 2,
        categories: {
            "ëŒ€ì¸ê´€ê³„": ["ì´ê¸°ë ¤ê³  í•œë‹¤", "ì§€ê³ ëŠ” ëª»ì‚°ë‹¤", "ì¡°ê¸‰í•˜ë‹¤", "ì „íˆ¬ì ì´ë‹¤"],
            "ê°€ì¡±ê´€ê³„": ["ë¹„êµë¥¼ ì˜í•œë‹¤", "ë¬´ì‹œí•œë‹¤", "í‘œí˜„ì´ ìê·¹ì ì´ë‹¤", "ê²½ìŸëŒ€ìƒìœ¼ë¡œ ë³¸ë‹¤"],
            "ì¼/ê³µë¶€": ["1ë“±ì´ ë˜ì–´ì•¼í•œë‹¤", "ìƒëŒ€ê°€ ìˆìœ¼ë©´ ë” ì˜í•œë‹¤", "ì´ê¸°ëŠ” ë°ì—ë§Œ ì§‘ì¤‘í•œë‹¤", "ì‚¬ì†Œí•œ ì¼ì— ëª©ìˆ¨ê±´ë‹¤"],
            "ê°•ì ": ["ì§‘ì¤‘ë ¥ì´ ìˆë‹¤", "í¬ê¸°í•˜ì§€ ì•ŠëŠ”ë‹¤", "ì„±ê³µì§€í–¥ì ì´ë‹¤"]
        }
    },
    {
        id: 3,
        categories: {
            "ëŒ€ì¸ê´€ê³„": ["ë‚¨ì˜ íƒ“ì„ ì˜í•œë‹¤", "ê±´ë“œë¦¬ë©´ í„°ì§„ë‹¤", "ê¶Œìœ„ì— ë°˜í•­ì ì´ë‹¤", "ìì¡´ê°ì´ ë‚®ì•„ ìƒì²˜ë¥¼ ì˜ë°›ëŠ”ë‹¤"],
            "ê°€ì¡±ê´€ê³„": ["ì¡°ì¢…í•˜ë ¤ í•œë‹¤", "ì§€ë°°í•˜ë ¤í•œë‹¤", "ì±…ì„ì§€ë ¤í•œë‹¤", "ì¸ì •ì•ˆí•´ì£¼ë©´ í™”ë¥¼ ë‚¸ë‹¤"],
            "ì¼/ê³µë¶€": ["í™•ì‹¤í•˜ë‹¤", "ì¥ë‹¨ì  íŒŒì•…ì„ ì˜ í•œë‹¤", "ì¡°ì§ê´€ë¦¬ëŠ¥ë ¥ì´ ìˆë‹¤"],
            "ê°•ì ": ["ì˜ë¦¬ ìˆë‹¤", "ì •ì˜ê° ìˆë‹¤", "ì„¤ë“ì„ ì˜ í•œë‹¤"]
        }
    },
    {
        id: 4,
        categories: {
            "ëŒ€ì¸ê´€ê³„": ["ì†Œì‹¬í•˜ë‹¤", "ê¸°ê°€ ì£½ì–´ìˆë‹¤", "ì¸ì •ë°›ìœ¼ë ¤ê³  ì• ì“´ë‹¤", "ê²½ìŸì ì´ë‹¤"],
            "ê°€ì¡±ê´€ê³„": ["ë¹„ë‚œí•œë‹¤", "ë§ˆìŒì— ì•ˆë“¤ì–´í•œë‹¤", "í—Œì‹ ì ì´ë‹¤", "ì˜í•˜ë„ë¡ ë¶€ì¶”ê¸´ë‹¤"],
            "ì¼/ê³µë¶€": ["ìì±…í•œë‹¤", "ì±…ì„ê°ìˆë‹¤", "ì˜í•˜ë ¤ê³  ê¸°ë¥¼ ì“´ë‹¤", "ì‰½ê²Œ í¬ê¸°í•œë‹¤"],
            "ê°•ì ": ["ìê¸° ìì‹ ì„ ì˜ ì•ˆë‹¤", "ë°˜ì„±ëŠ¥ë ¥ì´ ìˆë‹¤", "ë¹„êµë¶„ì„ì„ ì˜í•œë‹¤", "ëŠì„ì—†ì´ ìê¸°ê°œë°œì„ í•œë‹¤"]
        }
    },
    {
        id: 5,
        categories: {
            "ëŒ€ì¸ê´€ê³„": ["ì‚¬ëŒì„ ì¢‹ì•„í•œë‹¤", "í˜¼ììˆê³  ì‹¶ì–´í•œë‹¤", "ì˜ì¡´ì ì´ë‹¤", "í•¨ê»˜í•˜ê³  ì‹¶ì–´í•œë‹¤"],
            "ê°€ì¡±ê´€ê³„": ["ì˜ì‚¬ì†Œí†µì´ ì¼ë°©ì ì´ë‹¤", "ë°–ìœ¼ë¡œ ëˆë‹¤", "ì€ê·¼ìŠ¬ì© ìƒëŒ€ë°©ì´ í•˜ë„ë¡í•œë‹¤", "ìƒì²˜ì¤„ê¹Œë´ í™” ëª»ë‚¸ë‹¤"],
            "ì¼/ê³µë¶€": ["ì‹œì‘ì„ ì˜í•œë‹¤", "ë²Œë ¤ë†“ê³  ë§ˆë¬´ë¦¬ ì•ˆí•œë‹¤", "í˜¼ìì„œ í•œë‹¤"],
            "ê°•ì ": ["ë¬´ì‚¬íƒœí‰ì´ë‹¤", "ë‹¤ë¥¸ ì‚¬ëŒì„ í¸ì•ˆí•˜ê²Œ í•´ì¤€ë‹¤", "í˜„ì¬ì˜ ì‚¶ì„ ì¦ê¸´ë‹¤", "ì£¼ê´€ì´ ëšœë ·í•˜ë‹¤"]
        }
    },
    {
        id: 6,
        categories: {
            "ëŒ€ì¸ê´€ê³„": ["ì• ì”í•˜ë‹¤", "ì‚´ê°‘ë‹¤", "ì¹œì ˆí•˜ë‹¤", "ë¯¸ë ¨ì´ ë§ë‹¤"],
            "ê°€ì¡±ê´€ê³„": ["ê±±ì •ì´ ë§ë‹¤", "ê°„ì„­ì´ ë§ë‹¤", "ë‹¤ì •ë‹¤ê°í•˜ë‹¤"],
            "ì¼/ê³µë¶€": ["ìš°ìœ ë¶€ë‹¨í•˜ë‹¤", "ì´ìƒì£¼ì˜ì ì´ë‹¤", "ì¼ì— ì• ì •ì´ ë§ë‹¤", "ìê¸°ê²ƒì„ ì˜ ì±™ê¸´ë‹¤"],
            "ê°•ì ": ["ê°ìˆ˜ì„±ì´ í’ë¶€í•˜ë‹¤", "ëŒ€í™”ë¥¼ ì¦ê¸´ë‹¤", "ì‚¬ëŒì„ ì˜ ì±™ê¸´ë‹¤", "ë§ˆë‹¹ë°œì´ë‹¤"]
        }
    },
    {
        id: 7,
        categories: {
            "ëŒ€ì¸ê´€ê³„": ["ì˜ ë¹ ì§„ë‹¤", "ìƒ˜ì´ ë§ë‹¤", "ì˜ë‚œì²´í•˜ëŠ” ê¼´ì„ ëª»ë³¸ë‹¤", "ê³µì£¼ë³‘Â·ì™•ìë³‘ì´ ìˆë‹¤"],
            "ê°€ì¡±ê´€ê³„": ["ë‚˜ë§Œ ë°”ë¼ë´ì£¼ê¸°ë¥¼ ë°”ë€ë‹¤", "\"ë†€ì•„ì¤˜\"", "ì¹œë°€í•˜ê³  ì‹¶ì–´í•œë‹¤", "ì˜ìˆœìœ„ì´ê¸°ë¥¼ ë°”ë€ë‹¤"],
            "ì¼/ê³µë¶€": ["ìµœê³ ê°€ ë˜ë ¤ê³ í•œë‹¤", "ë‚˜ë§Œ ì˜í•˜ë©´ ëœë‹¤", "ìƒ˜í†µì´ë‹¤", "ë‹¤ë¥¸ ì‚¬ëŒì„ ì¸ì •í•˜ì§€ ì•ŠëŠ”ë‹¤"],
            "ê°•ì ": ["ìì¡´ì‹¬ì´ ìˆë‹¤", "ê°ìˆ˜ì„±ì´ ì˜ˆë¯¼í•˜ë‹¤", "ê°ì •ì„ ì˜ ì•Œì•„ì°¨ë¦°ë‹¤", "ì˜ ë‚«ëŠ”ë‹¤"]
        }
    },
    {
        id: 8,
        categories: {
            "ëŒ€ì¸ê´€ê³„": ["ëˆˆì¹˜ë³¸ë‹¤", "ì¡°ì‹¬ìŠ¤ëŸ½ë‹¤", "ë‹¤ê°€ê°€ì§€ ëª»í•œë‹¤", "ìê¸°ì£¼ì¥ì´ ì•½í•˜ë‹¤", "ìƒì²˜ë°›ì„ê¹Œë´ ë‘ë ¤ì›Œí•œë‹¤"],
            "ê°€ì¡±ê´€ê³„": ["ì—„ê²©í•˜ê²Œ ëŒ€í•œë‹¤", "í¸í•˜ê²Œ ëŒ€í•˜ì§€ ëª»í•œë‹¤", "ë‘ë ¤ì›€ ë•Œë¬¸ì— í™”ë¥¼ ì˜ ë‚¸ë‹¤"],
            "ì¼/ê³µë¶€": ["ì‹¤íŒ¨ë¥¼ ë‘ë ¤ì›Œí•œë‹¤", "ì‹œì‘í•˜ëŠ” ê²ƒì´ í˜ë“¤ë‹¤", "ì‹œê°„ì´ ê±¸ë¦°ë‹¤", "ìƒëŒ€ë°©ì˜ í‰ê°€ì— ë¯¼ê°í•˜ë‹¤", "í˜¼ìì„œ ë™ë™ê±°ë¦°ë‹¤"],
            "ê°•ì ": ["ì•ˆì „ë¹µì´ë‹¤", "ì˜ˆì˜ë°”ë¥´ë‹¤", "ëˆê¸°ê°€ ìˆë‹¤", "ë…¸ë ¥í•œë‹¤"]
        }
    },
    {
        id: 9,
        categories: {
            "ëŒ€ì¸ê´€ê³„": ["ìƒì²˜ë¥¼ ì˜ ì¤€ë‹¤", "ì˜ˆë¯¼í•˜ë‹¤", "ê´€ê³„ê°€ í˜ë“¤ë‹¤", "í™”ë¥¼ ì°¸ëŠ”ë‹¤"],
            "ê°€ì¡±ê´€ê³„": ["ì„±ì§ˆ ë¶€ë¦°ë‹¤", "ì§œì¦ë‚¸ë‹¤", "ì˜ ì‚ì§„ë‹¤", "ê¸´ì¥ê°ì„ ëŠë¼ê²Œí•œë‹¤"],
            "ì¼/ê³µë¶€": ["ì‹œì›í•˜ê²Œ í•œë‹¤", "í™§ê¹€ì— ì €ì§€ë¥¸ë‹¤", "ê°ˆë“±ì„ ì¼ìœ¼í‚¨ë‹¤", "ì¼ì— í™”í’€ì´ í•œë‹¤(ì¼ì¤‘ë…)"],
            "ê°•ì ": ["ì¶”ì§„ë ¥ì´ ìˆë‹¤", "ì—ë„ˆì§€ê°€ ë§ë‹¤", "ë’·ëì´ ì—†ë‹¤"]
        }
    },
    {
        id: 10,
        categories: {
            "ëŒ€ì¸ê´€ê³„": ["ê´€ê³„ ë¶ˆê°ì¦", "ìì£¼ ì ìˆ˜í•œë‹¤", "ì‹ ê²½ì“°ì´ê²Œ ë§Œë“ ë‹¤", "ë§¤ì‚¬ê°€ ê·€ì°®ë‹¤"],
            "ê°€ì¡±ê´€ê³„": ["í‘œí˜„ì„ ëª»í•œë‹¤", "ìì‹ ì—ê²Œ í™”ê°€ ë‚œë‹¤", "ë‹µë‹µí•˜ê²Œ í•œë‹¤", "ì²œë¶ˆë‚˜ê²Œ í•œë‹¤"],
            "ì¼/ê³µë¶€": ["ë©í•˜ë‹¤", "ê²°ê³¼ë¬¼ì´ ì—†ë‹¤", "ì—„ë‘ê°€ ì•ˆ ë‚œë‹¤", "ì ì†ìœ¼ë¡œ í”¼í•œë‹¤"],
            "ê°•ì ": ["ê²½ì œì ì´ë‹¤", "ë¬´ë¦¬í•˜ì§€ ì•ŠëŠ”ë‹¤", "ê²¸ì†í•˜ë‹¤", "ì—„ì²­ë‚œ ì ì¬ë ¥ì´ ìˆë‹¤"]
        }
    },
    {
        id: 11,
        categories: {
            "ëŒ€ì¸ê´€ê³„": ["ì°ë í•˜ê²Œ í•œë‹¤", "ë¬´ì˜ë¯¸í•˜ê²Œ ë§Œë“ ë‹¤", "ì´ˆì›”í•œì²™ í•œë‹¤", "í˜ë¹ ì§€ê²Œí•œë‹¤"],
            "ê°€ì¡±ê´€ê³„": ["í˜ë“¤ê²Œí•œë‹¤", "í—ˆê¸°ì§€ê²Œí•œë‹¤", "ì™•ë”° ë‹¹í•œë‹¤"],
            "ì¼/ê³µë¶€": ["ì˜ìš•ì´ ì—†ë‹¤", "í¥ë¯¸ê°€ ì—†ë‹¤", "ê²Œìœ¼ë¥´ë‹¤"],
            "ê°•ì ": ["ê²½ê³„ê°€ ì—†ë‹¤", "ìš•ì‹¬ì´ ì—†ë‹¤", "ì´ˆì—°í•˜ë‹¤", "ìˆ˜ìš©ë ¥ì´ ìˆë‹¤"]
        }
    },
    {
        id: 12,
        categories: {
            "ëŒ€ì¸ê´€ê³„": ["ê¸°ëŒ€ì— ë¶€ì‘í•˜ë ¤ê³  ì• ì“´ë‹¤", "ì¡°ìš©í•˜ë‹¤", "ì‚¬ë¼ì§€ê³  ì‹¶ë‹¤", "ê³µí‰í•˜ê²ŒëŒ€í•˜ì§€ ì•Šìœ¼ë©´ ìŠ¬í¼ì§„ë‹¤"],
            "ê°€ì¡±ê´€ê³„": ["\"ë¯¸ì•ˆí•´\"ë¥¼ ì…ì— ë‹¬ê³  ì‚°ë‹¤", "ê°ì •ì„ ê¾¹ê¾¹ ëˆŒëŸ¬ ë‹´ëŠ”ë‹¤", "ê¸°ì¨ì¡°ë‹¤", "í•„ìš”í•œ ì¡´ì¬ê°€ ë˜ë ¤ê³  ë…¸ë ¥í•œë‹¤"],
            "ì¼/ê³µë¶€": ["ì‹¤ë§ì‹œí‚¤ì§€ ì•Šìœ¼ë ¤ê³  ë…¸ë ¥í•œë‹¤", "ì—´ì‹¬íˆ í•œë‹¤", "í—Œì‹ ì ìœ¼ë¡œ í•œë‹¤"],
            "ê°•ì ": ["ì•Œì•„ì„œ ì˜í•œë‹¤", "ë‹¤ë¥¸ ì‚¬ëŒì˜ ì‹¬ì •ì„ ì˜ í—¤ì•„ë¦°ë‹¤", "êº¼ì´êº¼ì´ ì˜ ìš´ë‹¤"]
        }
    },
    {
        id: 13,
        categories: {
            "ëŒ€ì¸ê´€ê³„": ["ë…¸ì‹¬ì´ˆì‚¬í•œë‹¤", "ë§ì„¤ì¸ë‹¤", "ì „ì „ê¸ê¸í•œë‹¤", "ì•ˆì ˆë¶€ì ˆí•œë‹¤"],
            "ê°€ì¡±ê´€ê³„": ["í™•ì¸ì „í™”ë¥¼ ìì£¼í•œë‹¤", "ì”ì†Œë¦¬ê°€ ë§ë‹¤", "ê°•ë°•ì ì´ë‹¤", "í†µì œí•˜ë ¤ê³  í•œë‹¤"],
            "ì¼/ê³µë¶€": ["ì™„ë²½í•˜ê²Œ ì¤€ë¹„í•œë‹¤", "ê¹”ë”í•˜ë‹¤", "ì² ì €í•˜ê²Œ ê³„íší•œë‹¤"],
            "ê°•ì ": ["ìˆœë°œë ¥ì´ ìˆë‹¤", "ì„¸ì„¸í•˜ê²Œ í‘œí˜„í•œë‹¤", "ë¶„ìœ„ê¸°ë©”ì´ì»¤ë‹¤", "ì—´ì •ì ì´ë‹¤", "ì†”ì§í•˜ê³  íˆ¬ëª…í•˜ë‹¤"]
        }
    },
    {
        id: 14,
        categories: {
            "ëŒ€ì¸ê´€ê³„": ["ìê¸°ë¥¼ ë³´í˜¸í•˜ê¸° ìœ„í•´ ê±°ë¦¬ë¥¼ ë‘”ë‹¤", "ìœ„í˜‘ì„ ëŠë‚„ ë•Œ ê´€ê³„ë¥¼ ëŠëŠ”ë‹¤", "ì†ìœ¼ë¡œëŠ” ë–¨ê³ ìˆë‹¤", "'ì£½ê¸°ì‚´ê¸°' ì‹¬ì •ì´ë‹¤"],
            "ê°€ì¡±ê´€ê³„": ["ëƒ‰ë­í•˜ê²Œ ëŒ€í•œë‹¤", "ê³µí¬ ë¶„ìœ„ê¸°ë¥¼ ì¡°ì„±í•œë‹¤", "ì²œì§„ë‚œë§Œí•˜ë‹¤", "ì¥ë‚œë¼ê°€ ìˆë‹¤"],
            "ì¼/ê³µë¶€": ["ë¹ˆí‹ˆì—†ë‹¤", "ê¼¼ê¼¼í•˜ë‹¤", "í•œìˆœê°„ë„ ë†“ì¹˜ì§€ì•ŠëŠ”ë‹¤", "ëì¥ì„ ë³¸ë‹¤"],
            "ê°•ì ": ["ì°½ì˜ì ì´ë‹¤", "ìƒìƒë ¥ê³¼ ì•„ì´ë””ì–´ê°€ í’ë¶€í•˜ë‹¤", "ì†ë‚´ê°€ ë”°ëœ»í•˜ë‹¤", "ì—¬ë¦¬ë‹¤", "ë¦¬ë”ì‰½ ìˆë‹¤"]
        }
    },
    {
        id: 15,
        categories: {
            "ëŒ€ì¸ê´€ê³„": ["ê±°ë¦¬ë¥¼ ë‘”ë‹¤", "ë‹¨ì§ì„ ë§Œë“ ë‹¤", "ë¬´ê´€ì‹¬í•œ ì²™í•œë‹¤", "ë¨¼ì € ë‹¤ê°€ì™€ì£¼ê¸¸ ë°”ë€ë‹¤"],
            "ê°€ì¡±ê´€ê³„": ["ì†Œì›í•˜ë‹¤", "ì ë§‰í•˜ë‹¤", "ë¬´ë¯¸ê±´ì¡°í•˜ë‹¤"],
            "ì¼/ê³µë¶€": ["ì œëŒ€ë¡œ í•˜ë ¤ê³  í•œë‹¤", "ì™„ë²½í•˜ê²Œ í•˜ë ¤í•œë‹¤", "ì‹œë„ê°€ ì–´ë µë‹¤", "ë¹„ë‚œì„ ë‘ë ¤ì›Œí•œë‹¤"],
            "ê°•ì ": ["ì™„ë²½í•˜ë‹¤", "ëˆëˆí•˜ë‹¤", "ì§‘ì¤‘ë ¥ ìˆë‹¤", "ë…¸ê³¨ì ìœ¼ë¡œ ê´€ì‹¬ì„ ë³´ì¸ë‹¤"]
        }
    },
    {
        id: 16,
        categories: {
            "ëŒ€ì¸ê´€ê³„": ["ì´ˆê¸´ì¥ ìƒíƒœë‹¤", "ê³µê²©ì ì´ë‹¤", "ì•„êµ° ì•„ë‹ˆë©´ ì êµ°ì´ë‹¤(ì•„êµ°ì€ ë³„ë¡œì—†ë‹¤)", "ì ê°œì‹¬ì„ ë“œëŸ¬ë‚´ê¸° ë‘ë ¤ì›Œ ì™¸ë©´í•œë‹¤"],
            "ê°€ì¡±ê´€ê³„": ["ê°ì •í‘œí˜„ì´ ê·¹ë‹¨ì ì´ë‹¤", "ì‚­ë§‰í•˜ë‹¤", "ì“¸ì“¸í•˜ë‹¤"],
            "ì¼/ê³µë¶€": ["ì‹¤íŒ¨ëŠ” ì£½ìŒì´ë‹¤", "ì£½ê¸°ì‚´ê¸°ë¡œ í•œë‹¤", "\"ë‚´ê°€ ì£½ë“ ì§€ ë„¤ê°€ ì£½ë“ ì§€ í•´ë³´ì\"ëŠ” ì‹¬ì •ì´ë‹¤"],
            "ê°•ì ": ["ì˜¬ì¸í•œë‹¤", "ëª©í‘œì§€í–¥ì ì´ë‹¤", "ìœ„ê¸°ëŒ€ì²˜ëŠ¥ë ¥ì´ ìˆë‹¤"]
        }
    }
];

const emotionNames = [
    "ë¶€ë‹´ê°", "ê²½ìŸì‹¬", "ì–µìš¸í•¨", "ì—´ë“±ê°",
    "ì™¸ë¡œì›€", "ê·¸ë¦¬ì›€", "ì§ˆíˆ¬", "ë‘ë ¤ì›€",
    "í™”", "ë¬´ê¸°ë ¥", "í—ˆë¬´", "ìŠ¬í””",
    "ë¶ˆì•ˆ", "ê³µí¬", "ì†Œì™¸", "ì ê°œì‹¬"
];

const categoryClasses = {
    "ëŒ€ì¸ê´€ê³„": "cat-interpersonal",
    "ê°€ì¡±ê´€ê³„": "cat-family",
    "ì¼/ê³µë¶€": "cat-work",
    "ê°•ì ": "cat-strength"
};

let strategies = Array(3).fill('');
let strategyCount = 3;

function goTo(pageId) {
    document.querySelectorAll('.page').forEach(p => p.classList.remove('active'));
    document.getElementById(pageId).classList.add('active');
    window.scrollTo({ top: 0, behavior: 'smooth' });
}

function startQuiz() {
    const gender = document.querySelector('input[name="u-gender"]:checked');
    const age = document.getElementById('u-age').value;
    const consent = document.getElementById('u-consent').checked;

    if (!gender) { alert('ì„±ë³„ì„ ì„ íƒí•´ ì£¼ì„¸ìš”.'); return; }
    if (!age) { alert('ì—°ë ¹ëŒ€ë¥¼ ì„ íƒí•´ ì£¼ì„¸ìš”.'); return; }
    if (!consent) { alert('ê°œì¸ì •ë³´ ìˆ˜ì§‘ì— ë™ì˜í•´ ì£¼ì„¸ìš”.'); return; }

    renderEmotionCards();
    goTo('pageQuiz');
}

function renderEmotionCards() {
    const container = document.getElementById('emotionCards');
    if (container.children.length > 0) return;

    container.innerHTML = '';
    emotionsData.forEach(emotion => {
        const card = document.createElement('div');
        card.className = 'emotion-card';
        card.id = `emotion-${emotion.id}`;

        let categoriesHTML = '';
        for (const [catName, items] of Object.entries(emotion.categories)) {
            const catClass = categoryClasses[catName] || '';
            let itemsHTML = '';
            items.forEach((item, idx) => {
                const checkId = `e${emotion.id}_${catName.replace(/\//g, '_')}_${idx}`;
                itemsHTML += `
                    <label class="check-item" for="${checkId}" onclick="toggleCheck(this)">
                        <input type="checkbox" id="${checkId}" data-emotion="${emotion.id}">
                        <span class="custom-check">
                            <svg viewBox="0 0 24 24"><polyline points="20 6 9 17 4 12"/></svg>
                        </span>
                        <span class="check-label">${item}</span>
                    </label>`;
            });
            categoriesHTML += `
                <div class="category-group">
                    <div class="category-label ${catClass}">${catName}</div>
                    <div class="items-grid">${itemsHTML}</div>
                </div>`;
        }

        card.innerHTML = `
            <div class="emotion-header">
                <div class="emotion-number">${emotion.id}</div>
                <div class="emotion-checked-count" id="count-${emotion.id}">0ê°œ ì„ íƒ</div>
            </div>
            ${categoriesHTML}`;

        container.appendChild(card);
    });
}

function toggleCheck(label) {
    setTimeout(() => {
        const cb = label.querySelector('input[type="checkbox"]');
        if (cb.checked) {
            label.classList.add('checked');
        } else {
            label.classList.remove('checked');
        }
        updateCounts();
    }, 10);
}

function updateCounts() {
    let emotionsWithChecks = 0;
    emotionsData.forEach(emotion => {
        const checks = document.querySelectorAll(`input[data-emotion="${emotion.id}"]:checked`);
        const count = checks.length;
        const countEl = document.getElementById(`count-${emotion.id}`);
        if (countEl) {
            countEl.textContent = `${count}ê°œ ì„ íƒ`;
            countEl.className = 'emotion-checked-count' + (count > 0 ? ' has-count' : '');
        }
        const card = document.getElementById(`emotion-${emotion.id}`);
        if (card) {
            if (count > 0) {
                card.classList.add('has-checked');
                emotionsWithChecks++;
            } else {
                card.classList.remove('has-checked');
            }
        }
    });

    document.getElementById('progressPct').textContent = `${emotionsWithChecks} / 16`;
    document.getElementById('progressFill').style.width = `${(emotionsWithChecks / 16) * 100}%`;
}

function getResults() {
    const results = [];
    emotionsData.forEach((emotion, i) => {
        const checks = document.querySelectorAll(`input[data-emotion="${emotion.id}"]:checked`);
        results.push({ id: emotion.id, name: emotionNames[i], count: checks.length });
    });
    return results;
}

function showResult1() {
    const results = getResults();
    const totalChecks = results.reduce((sum, r) => sum + r.count, 0);
    if (totalChecks === 0) {
        alert('ìµœì†Œ í•œ ê°œ ì´ìƒì˜ í•­ëª©ì„ ì²´í¬í•´ ì£¼ì„¸ìš”.');
        return;
    }

    const maxCount = Math.max(...results.map(r => r.count));
    const sorted = [...results].sort((a, b) => b.count - a.count);
    const topCount = sorted[0].count;
    const topEmotions = sorted.filter(r => r.count === topCount && r.count > 0);

    const topHTML = topEmotions.map((e, i) => `
        <span class="top-badge">
            <span class="rank">${i + 1}</span>
            ${e.name} (${e.count}ê°œ)
        </span>
    `).join('');

    document.getElementById('topEmotions').innerHTML = `
        <h3>â™¥ ë‚˜ì˜ í•µì‹¬ ê°ì •</h3>
        <div class="top-emotion-badges">${topHTML}</div>
    `;

    const chartHTML = sorted.map(r => {
        const pct = maxCount > 0 ? (r.count / maxCount) * 100 : 0;
        const isTop = r.count === topCount && r.count > 0;
        return `
            <div class="bar-row">
                <div class="bar-num">${r.id}</div>
                <div class="bar-track">
                    <div class="bar-fill ${isTop ? 'top-emotion' : ''}" style="width:${pct}%">
                        ${r.count > 0 ? `<span class="bar-value">${r.count}</span>` : ''}
                    </div>
                </div>
                <div class="bar-value-outside">${r.count}</div>
            </div>`;
    }).join('');
    document.getElementById('barChart').innerHTML = chartHTML;

    goTo('pageResult1');
}

function renderDetailResult() {
    const results = getResults();
    const sorted = [...results].sort((a, b) => b.count - a.count);
    const top3 = sorted.filter(r => r.count > 0).slice(0, 3);

    let detailHTML = '';
    if (top3.length > 0) {
        top3.forEach(r => {
            const emotion = emotionsData.find(e => e.id === r.id);
            let tagsHTML = '';
            for (const [catName, items] of Object.entries(emotion.categories)) {
                items.forEach((item, idx) => {
                    const checkId = `e${emotion.id}_${catName.replace(/\//g, '_')}_${idx}`;
                    const cb = document.getElementById(checkId);
                    if (cb && cb.checked) {
                        const tagClass = categoryClasses[catName] || '';
                        tagsHTML += `<span class="detail-tag ${tagClass}">${item}</span>`;
                    }
                });
            }
            detailHTML += `
                <div class="detail-emotion-block">
                    <h5>${r.id}ë²ˆ ì˜ì—­ Â· ${r.name} (${r.count}ê°œ)</h5>
                    <div class="detail-tags">${tagsHTML}</div>
                </div>`;
        });
    }
    document.getElementById('detailResult').innerHTML = detailHTML;
}

function renderStrategyPage() {
    const container = document.getElementById('strategyList');
    container.innerHTML = strategies.map((strategy, index) => `
        <div class="strategy-item">
            <div class="strategy-number">ì‹¤ì²œ ë°©ì•ˆ ${index + 1}</div>
            <input type="text"
                   class="strategy-input"
                   placeholder="ì‹¤ì²œí•  ìˆ˜ ìˆëŠ” êµ¬ì²´ì ì¸ ë°©ì•ˆì„ ì…ë ¥í•˜ì„¸ìš”"
                   value="${strategy}"
                   onchange="updateStrategy(${index}, this.value)">
            ${index >= 3 ? `<button class="strategy-remove" onclick="removeStrategy(${index})">ì‚­ì œ</button>` : ''}
        </div>
    `).join('');
}

function updateStrategy(index, value) { strategies[index] = value; }

function addStrategy() {
    strategyCount++;
    strategies.push('');
    renderStrategyPage();
}

function removeStrategy(index) {
    if (strategyCount > 1) {
        strategies.splice(index, 1);
        strategyCount--;
        renderStrategyPage();
    }
}

const origGoTo = goTo;
goTo = function(pageId) {
    if (pageId === 'pageResult2') renderDetailResult();
    if (pageId === 'pageResult4') renderStrategyPage();
    origGoTo(pageId);
};

function resetAll() {
    document.querySelectorAll('input[type="checkbox"]').forEach(cb => cb.checked = false);
    document.querySelectorAll('.check-item').forEach(el => el.classList.remove('checked'));
    document.querySelectorAll('.emotion-card').forEach(el => el.classList.remove('has-checked'));
    strategies = Array(3).fill('');
    strategyCount = 3;

    const ageEl = document.getElementById('u-age');
    const consentEl = document.getElementById('u-consent');
    const genderEls = document.querySelectorAll('input[name="u-gender"]');
    if (ageEl) ageEl.value = '';
    if (consentEl) consentEl.checked = false;
    genderEls.forEach(el => el.checked = false);

    document.getElementById('emotionCards').innerHTML = '';
    updateCounts();

    document.querySelectorAll('.page').forEach(p => p.classList.remove('active'));
    document.getElementById('pageIntro').classList.add('active');
    window.scrollTo({ top: 0, behavior: 'smooth' });
}
</script>

</body>
</html>
